Então vamos lá. Então vamos lá. A aula hoje é mais soft. Então tipo, essa discussão que você começou aqui, eu quero que que aconteça, tá? Vamos começar a falar de

Ah,

vocês estão vendo minha tela? Tá, tá tudo certo aqui, cara. Vamos começar a falar de alguma de alguns incentivos que que são mais econômicos do que são de caráter econômico, tá? Que a que surgem em resposta a decisões técnicas que são tomadas lá no protocolo, tá? E essa é uma das coisas assim mais intrigantes, eu acho que mais interessantes em todo esse papo de ter um dinheiro descentralizado. Ter um dinheiro descentralizado, tá? Muito mais do que em outros tipos de sistemas descentralizados. Porque quando bota dinheiro no meio é nossa, é assim, é um negócio muito visceral pra gente, pô. É muito fácil de você perceber. se alguma coisa é boa ou não para você. É, é, parece que é instantâneo assim, parece que mexe com uma coisa muito essencial do ser humano. A gente tem alguma coisa com dinheiro, tá, que não é tipo assim do capitalismo e não sei o quê, que tem uma relação muito essencial com isso. Dinheiro é vida. Dinheiro é vida. Bacon é vida. Eu concordo que bacon é vida. Por exemplo, ol, eu ganhei um certo dinheiro, digamos, eu podia gastar, me divertir, etc., mas eu abro mão de de me divertir, abro mão daquela vida que eu teria. Ah, eu posso viajar paraa Europa? Não, eu vou guardar para para o futuro. Então, eu tô abrindo mão da de uma vida, da, digamos assim, de uma de curtir aquele momento da vida para materializar aquilo para um uso futuro. Então, se alguém tira aquilo ali meu, ele tirou uma parte da minha vida, aquela parte que eu abri mão. Tirou uma parte da sua vida? Sim. Quando alguém pega o seu dinheiro, ele tirou uma parte da sua vida. tirou uma parte da sua vida. Trabalhar é vender a vida, né? Trabalhar é vender a vida. É, é verdade. Trabalhar é vender a vida. Se eu colocar assim, é verdade. Tá, mas olha só, como é que teu nome mesmo? Rômulo, rômulo. Olha só, o que você tá falando em parte do o que você tá falando é na hora que você tava falando assim: "Ah, eu podia estar lá e fazendo festa e gastando aquilo, comprando coisas e não sei o quê". Rapidamente tu O que o que ao que ao que é que isso me remete? me remete a uma noção de que quando eu tenho é muito fácil, tipo assim, quando eu tenho mais dinheiro disponível, isso me dá mais poder de ação. Imediatamente você percebe que isso é melhor pra sua vida. É melhor ter mais poder de ação do que menos poder de ação, certo? Mesmo que você não haja. Uhum. Certo. É muito, é uma posição superior você poder fazer e não querer do que você querer fazer e não poder. Não é? É, é claramente duas posições muito diferentes, né? Eh, e o que a gente vai falar aqui tocam toca nisso assim, tá? Tem outros outros sistemas que são descentralizados, mas eles não, como eles não tm tanto a ver com dinheiro, tão pelo menos tão diretamente, essa relação de incentivo, ela é mais difícil de a gente perceber, dos agentes que estão ali perceberem o que que é um bom comportamento, o que que não é um bom comportamento, no sentido de maximizar o que eu o meu poder aqui dentro do sistema, tá? Maximizar o meu bem-estar no final das contas, quanto que eu consigo acumular de dinheiro, quero mais dinheiro, tá? Nesse nesse sentido aqui, tudo bem? Sobre isso, eu quero falar sobre dois dois constraints aqui, duas restrições, tá? Ã, primeira delas, primeira delas que vai gerar um que vai gerar um um mercado, tá? E antes de eu falar qual é o mercado, de que que é o mercado? Quer dizer, deixa eu comentar o que que é o mercado, tá? Porque vocês vão ver muitas teorias e não sei o quê, blá blá blá sobre o que é o mercado, tá? Mas eu acho que a melhor explicação assim, melhor definição do o que é o mercado, mercado é um processo de tomada de decisão. É um processo.

Mercado não é um lugar. Mercado não é uma coisa. Mercado é um processo. Mercado não é uma pessoa, não é uma empresa, não tem, não é nada a ver, não tem nada a ver com isso, tá? Mercado é um processo de tomar de decisão. Tomar decisões é se coordenar, é o decidir fazer algo ou deixar de fazer algo. Isso é tomar uma decisão, tá? Esse processo de tomada de decisão é um processo, no caso do mercado, é um processo de tomada de decisão

coletiva em várias pessoas tentando se coordenar. Ah, eu vou fazer ou vou deixar de fazer em resposta ao que vocês estão fazendo ou deixando ou deixando de fazer. E o que vocês fazem ou deixam de fazer influencia na minha decisão de fazer ou deixar de fazer outra coisa. Isso é o mercado. Isso, esse processo de tomar dessa decisão nesse tipo de ambiente é o mercado. Repara que isso é naturalmente um um um ambiente adversarial. Vocês são de alguma forma meus adversários. Eu não tô dizendo que vocês são meus inimigos, mas vocês são meus adversários no sentido de que vocês estão cuidando da vida de vocês. Vocês vão tentar maximizar o bem-estar de vocês e não o meu, entendeu? Pode ser que você faça alguma coisa que é boa para você, é ruim para mim. Isso não é maldade. Isso não tem nada a ver com maldade. Mas isso é um ambiente adversarial. Nesse ambiente, se tem uma coisa que você pode fazer que é boa para você, é ruim para mim e você eventualmente faz, você passa a ser meu adversário em alguma coisa que a gente tá tentando, que a gente tá ali concorrendo sobre, tá? E esse processo de tomada de decisão coletiva, tomada de decisão coletiva, ele tem um mecanismo de comunicação que é o que a gente chama de preço, o sistema de preço, tá? O preço comunica as tomadas de decisões entre as pessoas. É assim que esse processo vai acontecer. Se a gente vai se coordenar, a gente precisa se comunicar de alguma forma. E aqui nesse processo a gente não comunica necessariamente falando ou necessariamente a gente comunica fazendo alguma coisa. E especificamente nesse processo aqui, a gente tá fazendo alguma troca e nessa troca tá mediada por um bem que a gente chama de dinheiro. E isso determina um certo preço de alguma coisa e isso é a formação que a gente vai usar para se coordenar aqui, tá? E o que é que a gente tá tentando decidir no final das contas? Porque tem decisões que são econômicas e tem decisões que não são econômicas. Tá? Por exemplo, eu chegar lá e falar assim: "Ah, eu não gosto de, sei lá, eu não gosto de vestir roupa branca, isso não é necessariamente uma decisão econômica, é uma pessoa de gosto pessoal, tá? Muito diferente ao chegar lá no supermercado falar assim: "Beleza, eu quero comprar comida. Ah, eu posso comprar ovos ou eu posso comprar tomate para comer no café da manhã". Vamos supor que se as duas coisas fossem igualmente OK para mim. Ah, se tiver tomate, beleza. Se tiver ovos, beleza. Tô de boa com os dois cenários. Só que para eu comer ovos, eu quero, sei lá, seis ovos no café da manhã e para comer tomate eu quero 1 kg de tomate. Sei lá, uma situação meio absurda aqui, mas é o que tá me vindo na cabeça, tá? Aí eu vou lá num belo dia no supermercado e falo assim: "Beleza, vou comprar o café da manhã de amanhã". Aí os seis ovos estão custando, sei lá, R$ 5 e 1 kg de tomate tá custando R$ 9. Se as duas coisas do ponto de vista da decisão não econômica, tá vendo que é o meu gosto pessoal, tanto faz as duas coisas, o que que é a decisão econômica ali para mim? Ah, vou comprar ovos que é mais barato, maximiza meu bem-estar, eu preciso entregar menos para receber uma coisa que me satisfaz. Eu maximizo essa relação de custo benefício, nesse exemplo maluco que eu construí aqui, tá? Repare que essa é uma decisão econômica e ela é mediada pelo pelo preço pelo pelos preços relativos das coisas, tá? É mediado pelo preço relativo das coisas. Isso é o mercado. Isso é o mercado. Isso é o mercado. E tá todo mundo aqui o tempo todo agindo no mercado quando a gente decide comprar ou não comprar alguma coisa com base no preço relativo que a gente tá encontrando coisas. Tá beleza?

Dito isso, sempre surgirá o mercado, sempre surgirá o mercado quando houver escassez de alguma coisa. Porque quando não há escassez, não faz sentido a gente ter um sistema de preço para coordenar, tomar de decisão de quem vai consumir alguma coisa ou quem não vai consumir aquela coisa. Por exemplo, o ar que a gente tá respirando aqui agora não tem nenhuma escassez pra gente, pelo menos não por enquanto. Não tem nenhuma noção de escassez. Você nunca pagou pelo ar que você tá respirando. Ainda assim, tu tá consumindo ar todo dia, o tempo todo. Se tu não consumir essa parada, tu morre. É mais grave do que comida e água. E não tem um mercado de, pelo menos não por enquanto, não tem um mercado de ar. tão tentando fazer, mas ainda não tem uma coisa totalmente funcional assim, tá? E mesmo que venha a ter, vai ser um mercado completamente artificial, porque no no mundo real não tem escassez de ar, pelo menos não tem ainda. Pode ser que um dia isso aconteça, tá? Pode ser que um dia, sei lá, os mares inundem a terra toda, não sei o que, a gente tem que morar embaixo d' água. Aí vai começar a ter uma escassez de ar, pô. Entendeu? Então aí vai ter que começar a ter um mercado de ar. diga ou alguma eh algum governo, alguma organização resolver criar esses caféis, mas aí começa a ser uma questão de outros mecanismos de coordenação que não são via mercado. Eu não tô dizendo que o mercado é o único mecanismo de coordenação entre os seres humanos, tá longe de ser. Tem vários outros que são igualmente poderosos. A linguagem é uma delas. A, o direito é um outro sistema de coordenação, tipo, eu não, eu não diria tão poderoso quanto mercado, mas assim, é unipresente também, né? Tá unipresente é uma tá em todos os lugares, tá? A política é um outro, enfim, tem outros mecanismos de coordenação e eles interagem. Você diz que o mercado surge por escassez, certo? Não, eu disse que onde houver escassez, escassez é um mecan é um uma característica necessária para o surgimento de um mercado. Para o surgimento, mas paraa continuidade dele também, porque eu tô assim, é, pode ser que surja o mercado e depois as pessoas não aquilo não, porque precisa, se tem escassez, existe uma noção de que alguém quera quera consumir aquela coisa que é escassa. Se ninguém quer consumir aquela coisa, mesmo que aquela coisa seja limitada, finita, não tem escassez, porque ninguém quer aquilo. É exatamente. Pensa na tecnologia assim. Comprei ano passado um iPhone última geração, aí esse ano eles vão lançar outro. Uhum. Já lançaram, né? Último modelo, última geração. Tá, tá me faltando alguma coisa? Tá escasso. Não, mas não, mas esse exemplo não é exatamente não é muito bom porque pode porque o o motivo de você querer ir lá comprar o telefone novo não importa aqui. Você pode simplesmente falar: "Ah, eu quero um novo e pronto, mas você já tem um totalmente funcional e tal, mas tá, isso não importa". Mas o mercado existe mesmo isso, porque continua tendo gente que olha e fala assim: "Ah, eu já tenho telefone, mas eu quero o novo, eu quero o mais novo." Beleza, tranquilo. Porque essa necessidade pode ser criada de maneira artificial, né? artificial que eu quero dizer assim, ela não existe na na realidade, é o caso do telefone, mas ela é, digamos assim, um assaltante mata para ter um celular, por exemplo, porque eh eu acho que tem alguns merc algumas situações são mais um um mais interessantes do do que já te passo a palavra, mais interessantes do que do que esse esse caso. Pensa no lixo. Pensa no lixo. Tipo, o lixo é o rejeito. O lixo é uma coisa que em princípio ninguém quer, sacou? Se ninguém quer, em princípio não tem escassez daquilo. Não tem escassez não porque não seja limitado, finito ou uma quantidade determinada, tá? Não é por causa disso, é porque a demanda por aquilo é muito baixa, por escassez daquilo sobre aquilo é muito baixo também. Quem que quer comprar lixo? Quem que quer consumir lixo? Percebeu? Esse é um mercado bem mais difícil de olhar e falar assim, tá, como é que funciona o mecânico de escassez aqui, tal, não sei o quê. E aí onde funciona, por exemplo, esse é um tipo de mercado que tem que existe e ele funciona, ele é mais impulsionado por outras regulações, por outros motivos de coordenação que não são totalmente somente econômicos. Por exemplo, político vai lá e fala: "Não, beleza, mas você não pode jogar teu lixo em qualquer lugar." Uhum. Aí isso começa a ser um problema para você, porque aí você passa a ter um problema de consumir o serviço de descarte do lixo. Ah, mas isso é artificial, necessidade artificial. É, pode ser. Mas ninguém aqui tá questionando se ninguém aqui tá, eu acho que ninguém aqui vai questionar que não é para você jogar a lixa em qualquer lugar. Ponto final. Se tá, se tá OK a regulação como tá ou não, é outra conversa, mas eu acho que ninguém vai questionar se tá tá tranquilo. É o tipo de regulação que eu acho que ninguém vai vai reclamar. Pera aí. Falou da escopia

mais ou menos isso porque é um mercado que artificial, né? Porque os diamantes podem ser feitos até de forma artificial. Hum.

Para isso, para criar um cícado

de diamantes. Sei um tem algumas propriedades diferentes de diamante natural diamante criado também. Não é tão simples você criar o diamante artificial de máquinas caras. É, eu não queria e tentar ficar elaborando muito nesse conceito de escassez ou não, mas simplesmente colocar aqui um pré-requisito para o surgimento de um mercado é escassez. Qual é o motivo dessa escassez? Não me vem ao caso aqui, porque no nosso caso, a gente vai criar certa escassez, entre aspas, de forma artificial. a gente vai tomar decisões desarbitrárias, vai implementar uma certa regra lá no no protocolo ou certas regras e isso vai criar algum algum tipo de escassez e aí por conta disso acaba surgindo no mercado. Podemos seguir? Então vamos lá. O primeiro mecanismo de escassez desses aqui é uma regra de consenso que vai dizer que o tamanho do bloco tem um limite. Eu não aceito o bloco de qualquer tamanho, quantidade de bites sozinha escassez sozinha escassez para percepção de valor sobre aquela escassez? Sim, valor e preço são duas coisas que dependem dessa percepção de escassez relativas e demanda da sobre aquilo. Como eu tô te falando, tem bastante lixo, mas ninguém quer lixo. Não tem valor, mas se eu começar a descobrir aquilo do lixo, eu consigo ter alguma coisa super valor, o lixo começa a ser valorizado para tabela, porque dinheiro não é valorizado. Sim, tem lixo e lixo, não é? Tem lixo de latinha de alumínio que você pode ir lá e fazer coisas com aquela latinha de alumínio ou com vidro. ou com outras coisas e aí passa a olhar alguém falar assim: "Hum, de repente eu quero consumir esse lixo aí que para você é lixo, para mim não é. Para mim é uma matéria prima para eu fazer outra coisa". Por exemplo, dinheiro em si não tem valor. Hã? Valor é percepção do dinheiro. O dinheiro em si não tem valor. A papel moeda, tipo, é só um mecanismo de troca. O dinheiro é só um mecanismo de troca. Tipo, a gente discuti foi a primeira aula, tipo, isso, isso aí tem que tá martelado. Que qual é o valor de dinheiro? O valor do dinheiro é o que você percebe, é a sua expectativa de conseguir trocar ele por outras coisas depois. Não interessa que tipo de dinheiro que é, é isso que ele é. É isso que daí é que mora a percepção de valor dele. Quanto que é o valor? O mesmo R$ 1 para você pode valer coisa diferente de R$ 1 para outra pessoa.

Podemos seguir então. Tá bom. Uma das regras de consenso, uma das regras de consenso que a gente inclui no vai incluir é um limite no tamanho do bloco, tá? No Bitcoin, especificamente o no início não tinha limite no início da rede não tinha nenhuma regra falando: "Ah, não, se o bloco chegar, tiver tantos bytes, eu mais do que tantos bytes, eu vou rejeitar". Não existia essa regra. Não me lembro se foi em 2009 ou 2010, mas bem no início da rede o Satos colocou o limite de 1 M, 1 MB, tá? E esse é um limite que tá valendo até hoje. Ele foi ficando mais sofisticado. A gente vai falar sobre isso porque eu vou falar de mudanças de regras e mecanismo de mudança de regras, tá? Mas tem um limite. E aí vocês vão se recordar o que que tem no bloco. Tem 80 bytes de cabeçalho mais a lista de transações. E aí aqui, meu amigo, as transações não tem limite, não tem um padrãozinho e um fixo. A transção pode ser, sei lá, 60 by. 60 bytes não tem como porque só assinar tubo só um hash tem 32 bytes. Então tem que ter no mínimo um hash apontando pro pro pra transação que eu quero gastar. Então vamos chutar aí, sei lá, 200, 300 bytes que eu precise ali para montar uma transação. Ou pode ser uma transação que tem muitas saídas e a gente viu que tem, se tem muitas saídas, tem muitos contratos, tem muitos programas de computador, vai ficar precisar de mais bytes para expressar aquilo, tá? ou tem muitas entradas, eu quero gastar muitas moedas de uma vez só, então eu preciso de muitas assinaturas, eu preciso de muitas referências para outras transações. Então vai, preciso de mais, colocar mais dados para representar aquilo, preciso usar mais dados mesmo, tá? Então as transações limite assim, em princípio, não tem um tamanho tamanhos pode ser pequenos, pode ser grandes, pode ser a variabilidade enorme, tá? Só que se o bloco vai ter um limite de 1 me, tá? vai ter um limite de quantas transações vou conseguir colocar aqui, quantas transações vou conseguir colocar juntas que fica abaixo de 1 mega, tá? Isso gera uma noção de escassez por pelo serviço de confirmação das transações. Repare, se tiver mais transações do que cabe no mais transações pendentes esperando por serem confirmadas do que transações que cabem num bloco, algumas delas vão ser confirmadas e outras não vão ser confirmadas. E a partir disso eu consigo criar um mercado, um mercado para decidir quais delas eu vou incluir no bloco, confirmar, quais delas vão ficar de fora, tá? O mecanismo nativo para isso é a ideia de ter uma taxa, a ideia de o por isso é para isso que existe a taxa, tá? é a ideia de que quem tá propagando a transação vai comunicar de alguma forma a urgência daquilo com pagando mais ou menos taxa. I ser uma forma de uma pergunta de B mesmo sem o minerador em si ganhar o dinheiro só para minerar o Isso é uma conversa que a gente não sabe dizer como é que vai ser no futuro, mas vou chegar ali também que é uma hora vai acabar o subsídio do bloco. E aí em princípio vai, qual vai ser a remuneração de quem tá minerando? Vai ser as taxas. Mas a gente não sabe dizer se as taxas vão ser suficientes ou não para isso. Eu não, eu pessoalmente não tô tão preocupado com isso quanto outras pessoas, mas eu entendo que isso pode virar um problema sim, se a gente mantiver as regras de consenso como elas são hoje. A gente não é obrigado a manter as regras como elas são hoje. Que é o que eu quero falar na segunda metade da aula ali na próxima depois do intervalo. Como é que a gente mecanismo de como é que a gente pode mudar as regras? E a gente muda as regras direto, direto entre aspas, tá? Mas com uma certa frequência muito maior do que as pessoas imaginam. Bitcoin tá longe de ser uma coisa imutável, inclusive ele é bem diferente do que ele era há 15 ou 16 anos atrás. A essência é a mesma, mas várias coisas que a gente faz hoje são já regras bem diferentes. Tudo bem? Mas vamos lá. Segue aqui. Como que funciona o mecanismo? esse mecanismo de taxas, porque isso, como funciona isso? Repare, a taxa tá servindo como um mecanismo de comunicação para eu tentar comunicar, para eu fazer uma algum tipo de comunicação entre quem tá criando a transação, quem quer que a transação seja confirmada e aquela pessoa que tá confirmando a transação. Eles estão se comunicando via essa taxa, tá? Isso é um mecanismo de comunicação, de coordenação entre eles, tá? Só que essa linguagem,

entre aspas, essa linguagem que é a taxa, ela tem certas propriedades, ela tem certas características que não foram exatamente escolhida pelas pelos participantes ali, mas elas são escolhidas pelos participantes porque eles estão participando do sistema, tá? Primeira coisa, se observar, a taxa é controlada pelos usuários e não pelo minerador. A taxa, quem é que decide qual é a taxa que vai pagar? Quem tá fazendo a transação? Quem tá escrevendo a transação? Eu tô escrevendo a transação, eu decido. Entrou 10, eu quero deixar um de taxa. Eu que escolho a taxa. Quero escolher zero de taxa. A única coisa que eu não posso fazer é gastar mais do que do que tá entrando na de entradas na transação. Fora isso, eu posso fazer em princípio que eu quiser, tá? Então, repare, quem escolhe, quem decide quanto vai pagar de taxa é o é o usuário, tá? A única coisa que o minerador pode fazer é confirmar ou não uma transação. Confirmar ou não uma transação. Ponto final, tá? Vou além o usuário. E a gente vai falar sobre tentar mudar a taxa, porque pode ser que eu escolhi uma taxa e aí ela e eu e aí começou a demorar demais e eu quero tentar aumentar a taxa, por exemplo. Tá? Isso pode ser alguma coisa, mas vamos lá. O usuário tá vendo em princípio o que tá acontecendo na rede, tá? Ele tá vendo em princípio, ele consegue ali mudar o que? Agir, né? Agir e responder. Ah, eu quero, vou botar mais taxa porque parece que vai precisar de mais taxa. Não botar menos taxa porque tá menos congestionado e tá de boa. Vamos falar também como é que se essas decisões são feitas, mas o usuário ele tem um certo poder de olhar e decidir o que vai acontecer, tá? O minerador ele não consegue fazer nada. Porque que que seria o mecan um mecanismo do minerador influenciar na taxa? O minerador para influenciar na taxa, ele precisa conseguir controlar de alguma forma a escassez, porque ele que tá oferecendo o serviço. Ele que tá oferecendo o serviço, tá? Pense na padaria. O exemplo que eu costumo dar é meio absurdo, mas é mais ou menos mais ou menos isso, tá? Pense na padaria. O cara tem, sei lá, uma uma uma uma assadeira lá com 10 pão de queijo. Com 10 pão de queijo. Aí chega alguém para comprar o pão de queijo. Como é que é a situação normal do mercado entre aspas normal? A pessoa vai lá e pergunta quanto custa esse pão de queijo? R$ 5. E aí a pessoa que tá comprando, que tá pagando, decide se vai pagar ou não, certo? Ela pode negociar e tal, mas ela que decisão última é: "Ah, eu só decido se eu vou pagar ou não vou pagar". Beleza? Como é que é esse mercado aqui? Tem lá os 10 pão de queijo. Você entra para comprar o pão de queijo e fala pro pro dono da padaria: "Ah, eu pago R$ 3 no seu pão de queijo". Quer ou não quer? E a única decisão que ele tem lá é aceitar ou não aceitar. Ele não, o minerador nesse caso aqui, ele não tem nenhuma. Vou falar assim: "Não, tem que ser no mínimo R$ 5, senão não vou minerar nada". Ele não consegue falar isso para mim, pelo menos não diretamente. Ele ele só consegue não incluir não incluir nada ali para minerar. Mas repare que ele tem um custo, ele tá lá executando serviço de minerar, ele não ele o custo dele não aparece depois que ele minerou. Ele tem que tá lá executando aquele processo o tempo todo. Então o custo tá acontecendo. O custo é fixo ali, meio que fixo, meio que constante, tá? A única coisa que ele tem que decidir é de um lado tem essa pressão aqui de meu custo, meu custo, meu custo acumulando. Chega alguém me oferecendo um satoche ou 10 satoches ou 100 satoche ou um satoche e eu tenho que olhar e falar assim: "Hum, eu queria que alguém me pagasse 500". A minha operação custa 500, só que ninguém tá disposto a pagar 500. Repar que ele não tem muita opção além de ou desliga essa parada e para o custo, mas se ele para o custo dele, ele também para o o o faturamento, porque aí ele não vai minerar bloco nenhum mais, que é a fonte de faturamento. Ou ele pode ir lá e começar a incluir transações que pagam pouca taxa mesmo, mesmo que ela seja um princípio suficiente, porque ele olha e fala assim: "Pelo menos eu tenho algum faturamento." Qual que é a decisão que cada minerador vai fazer? É uma decisão comercial. Isso aí eu sei lá o que que ele vai fazer. Repara que isso não tem nada a ver com protocolo mais. Isso é literalmente uma decisão comercial, uma decisão empresarial. Professor, quando você falou do exemplo dele ali, se assim realmente o minerador tem lucro, toda mineração dá lucro, pode estab alguns mineradores podem estar trabalhando no prejuízo, né? Eh, por qual motivo seja lá qual for, né? Mas o a meta da descentralização do bitco não seria evitar que esse tipo de coisa aconteça? Qual tipo de coisa? que alguém minere sem lucro para poder centralizar a mineração, crime com os outros mineradores menores. Mas a gente não tem controle sobre isso, porque repare que isso isso tá fora da decisão técnica de protocolo. Eu não tenho como controlar a eficiência do do minerador. Eu não tenho como controlar que alguém descobriu um algoritmo e isso acelera a parada. Eu não tenho como controlar que alguém inventou uma máquina nova e isso aumenta a eficiência dele, consegue minar, gastar menos energia com menos. Se ele aumenta a eficiência, ele continua tendo porque Mas isso isso pode ser o suficiente para empurrar os outros que não são tão eficientes para uma para uma margem negativa já de negócio, entendeu? Quando o teu, imagina que você tá num mercado aqui, qualquer mercado, tá todo mundo fazendo a coisa igual, de repente alguém inventou um processo novo e aquilo reduziu muito o custo dele, o que que vai acontecer automaticamente? Aquele, aquele um que tá mais eficiente, ele, cara, ele tem uma ele tem uma uma um incentivo monstruoso para diminuir preço, para poder aumentar a fatia dele de mercado. Ele tá mais eficiente, ele pode agora baixar preço e ainda assim ter a mesma ou mais lucratividade que ele tinha antes. Só que na hora que ele diminui preço, ele bota pressão nos outros financeira mesmo. Os outros precisam ou ficar mais eficientes ou sair do mercado porque eventualmente aquele preço não justifica mais o negócio dele, entendeu? Só que isso é uma, isso não, isso não tem nada a ver com protocolo. Que isso? Isso não tem nada a ver com protocolo. Isso a gente não tem nenhum controle sobre isso. Será que algum dia pode abrir uma centralização? Aliás, não é que não é que a gente não tem nenhum controle sobre isso. Vamos tocar um pouco uma tangente aqui, tá? No Bitcoin especificamente a gente, o resto que a gente usa é CH2 256. É XH 256 duplo, mas é CH2 256, tá? SH 56. No início do da coisa toda, a gente fazia mineração com CPU, igual vocês vão fazer aí na tarefa de vocês. Ali por volta 2010, acho que foi por volta 2011, por aí mais ou menos, alguém começou a usar GPU para minerar, percebeu que dava para implementar e foi lá e fez. E ficou muito mais eficientes. Ordens de grandeza mais eficiente, energeticamente falando, gasta menos, calcula muito mais restos. Tá? Aí em algum momento todo mundo começou a minerar com GPU. Em algum momento alguém falou assim: "Vamos fazer um chip específico para minerar". E aí implementou implementou ASIX, que é o o estado da arte hoje. E isso assim vai, a gente só vai tentando melhorar os AIC ali, tá? ASEX. Problema de AIC começa a ser uma questão, tipo, a complexidade disso aqui é muito maior do que a complexidade disso aqui. Para você começar a minerar hoje e fazer um um business a partir daí, você já tem que começar por aqui. Você já tem que começar no nível de complexidade mais alto. Você não você não você não tem a mínima chance de começar percorrendo a complexidade e aumentando gradativamente. Já tem que começar de complexidade que a coisa tá hoje, tá beleza? Isso é o que tá acontecendo no Bitcoin, tá? Hoje

tem uma empresa chinesa chama Bitman que faz esses que inclusive é um problema, tem mais gente trabalhando para ter outros fabricantes disso, mas hoje basicamente só tem um fabricante. Enfim, outras coins, outras moedas, elas tendem a rejeitar esse modelo aqui. Por quê? Porque é por por esse mesmo por esse argumento que você tá me trazendo, que é tá, mas isso aqui aumenta a centralização da rede porque vai ter menos gente capaz de entrar nesse nesse business. Tipo, a barreira de entrada é grande. Sim. Tá. Exemplo, Monero. Monero usa uma outra função de H. Não tô dizendo que Monero é ruim, tá? Presta atenção no que eu vou falar.

Monero, eu não conheço detalhes da detalhes detalhes de tudo do protocolo de Monero, tá? Mas uma das coisas que eles fazem é não usar SH256, ele usam uma função de H bem específica feita para eles lá, tá? Que ela meio que só consegue ser implementada eficientemente em em software, tá? Não me pergunte detalhes de como é que funciona essa função de rest. Eu não parei para estudar, ver como é que ela é, porque que não daria fazer em hardware? Qual é a minha tese? É de que ela provavelmente é uma função que precisa guardar um estado muito grande, precisa de muita memória. Provavelmente é esse o problema dela, tá? E aí você não consegue fazer tipo tão eficientemente em Azic, porque qual a ideia do AIC é não é você fazer a conta mais rápida, é você ter milhares de de contas em paralelo, tá? é você calcular, fechar 256 em paralelo assim com como se tivesse muitos processadores. Aqui eu acho que a ideia que precisa de muita memória e você precisaria de uma memória, quantidade muito extraordinária de memória para fazer isso muito paralelizado, tá? Eu acho que essa é a ideia básica, mas confesso que eu não conheço detalhes da implementação de como é que é o resto delas, tá? Mas a ideia deles é essa, não não centralizar, não centralizar, porque isso diminui a barreira de entrada pro pro minerador. Se você quiser começar agora a minerar lá Monero, é relativamente fácil. Você não precisa de uma operação industrial igual uma operação de Bitcoin para minimamente justificar o custo dessa coisa. Tem monero, a ênfase é em privacidade, né? Hã? Monero a ênfase em privacidade. Monero é a ênfase em privacidade. A gente vai falar de privacidade em outro momento. Mas isso não tem uma vulnerabilidade no Bitcoin. Oi? Não tem uma vulnerabilidade, uma vulnerabilidade não de código, mas não tem muito certo e errado, tá? Você tá me perguntando se isso não gera vulnerabilidade. Você tá me perguntando no Bitcoin. É, a gente vai falar sobre problemas de de Bitcoin, que que os mineradores eventualmente podem fazer como se fosse de sacanagem ou de comportamento que parece ser inadequado. Pode ser a fabrica, pode pode isso tudo aí é começa a ser um problema. O o fabricante do que pode estar fazendo alguma coisa, é meio difícil disso acontecer porque é calcular hash, não tem muito o que fazer aqui, entendeu? Pode não é calcular uma assinatura que tem a ver com manter um segredo. Aqui não tem segredo nenhum envolvido. Mas ele pode soprar o vento para um cara pro outro. Soprar o vento para um cara pro outro. Como é que ele faria isso? Ele pode fechar um acordo econômico de vender só o hardware dele para um car. Ah, sim, sim, sim. Ele pode ah vender o hardware dele para uma não vender para certas pessoas, por exemplo. Exato. Ou para certas empresas. Sim, isso tudo pode acontecer. Aí essas empresas elas podem fazer uma black acordar e fazer uma black. Por isso que é interessante ter mais, ter mais fabricantes de ASIC, ter mais fabricantes das máquinas mesmo. Basicamente só tem grande assim de grande porte, só tem uma uma grande empresa no mundo que é e fabrica uma mente miner. Enfim, isso é uma um problema em aberto, mas é um problema que, repar, não é um problema do protocolo, é um problema de business em torno, de fazer um business funcionar em torno do do de um protocolo, é o caso da escassez, tá? É, e tipo, vocês entendendo isso um pouco melhor, vocês podem olhar e falar assim: "Ah, tá bom, de repente pode ser que vale a pena que eu queira tentar montar um business que resolva esse problema." Não sei. Esse é um dos objetivos disciplina, tá?

Mas vamos lá, seguindo aqui, seguindo aqui, voltando na minha analogia lá do do do pão de queijo, do pão de queijo no mercado normal, o cara o tipo assim, imagina que o é a pessoa que tá entrando para comprar o pão de queijo que fala: "Eu quero pagar tanto", tá? Imagina que custou R$ 5 para fabricar cada pão de queijo, mas só entra gente querendo pagar R$ 1. O cara já gastou os R$ 5, sei lá, R 50 ali para fazer os 10 pão de queijo. Em princípio, provavelmente o que que vai acontecer? Ele vai vender lá pelo preço que der. E num mercado normal, entre aspas, aquele fabricante provavelmente não fabricaria mais pão de queijo, porque ele olha e fala assim: "Ah, eu tô fabricando alguma coisa com um certo custo e eu não consigo vender e eu só vendo com prejuízo. Então, uma hora eu vou parar de fabricar aquilo, uma hora eu vou parar de produzir o serviço." O minerador pode pode fazer isso, ele pode parar desligar as máquinas dele, tá? Qual é o problema? Problema é que do ponto de vista global aqui do protocolo, a rede vai ficar mais lenta, a taxa de produção de blocos vai ficar mais lenta num primeiro momento. Num primeiro momento, mas eventualmente se se tiver ainda a gente minerando, eventualmente vai chegar num num período de ajuste da dificuldade. E a gente viu, se demorar demais para minerar os blocos, a dificuldade vai abaixar. E se demorar mais de novo, vai abaixar de novo. E vai abaixar de novo. Então, a taxa de produção dos blocos no sistema é mais ou menos fixa. Cada minerador individualmente não consegue controlar isso. Mesmo se for uma pool muito grande, ele não, a gente vai, vou explicar o que é uma. Ele não consegue controlar isso, não sozinho, tá? Isso quer dizer que a demanda é variável. que é do lado dos usuários, mas a oferta dos blocos é fixa. Minerador não consegue controlar isso, tá? Isso é bom ou rin? Eu não faço a menor ideia, mas quando eu trago esse fato pros meus colegas economistas, isso é um mercado estranho e isso é um mercado que eles não conseguem entender direito e eles, tipo, gera problemas até na modelagem disso, porque isso quebra todos a teoria de de como é que poderia funcionar essa coisa, tá? Por isso que eu tô dizendo isso, eu não tô dizendo isso é bom ou ruim. O que eu tô dizendo é a gente não sabe como é que isso vai funcionar no futuro. Tô explicando como é que é, tá? Tô explicando como é que é. O minerador não tem, em princípio, não tem controle sobre a taxa de oferta dos blocos, tá? Então tem uma escassez muito grande relativa aqui nessa história do 1, tá? Tem uma escassez muito grande, tá? problemas que isso traz, fora não saber se isso vai funcionar no longo prazo, tá? Problemas que isso traz. Primeiro problema, primeiro problema, problema em aberto. Fe estimation. Como que eu, usuário, decido quanto que eu vou incluir de taxa na minha transação? Porque eu quero pagar o mínimo possível. é um custo, eu quero pagar o mínimo possível, mas se eu pagar de menos não confirmo minha transação e eu quero que minha transação seja confirmada. Então eu quero tentar estimar quanto que é a taxa adequada para conseguir confirmar aquilo num tempo razoável, tá? Num tempo razoável,

basicamente. E aí aqui não tem uma boa solução, não é que não tem uma boa solução, não tem uma solução definitiva, tá? E é um campo de pesquisa em aberto. Como estimar essa taxa? Aí vocês vão falar cadeia de Marcov, eh, filtro de calma, blá blá. É, é problema de estimação mesmo, tá? Que que você tem de informação? De informação que que você pode usar? Você tem basicamente duas informações aqui, tá? A primeira delas é: Qual foi a taxa que foi paga nos últimos blocos? Você

tá vendo os blocos? Você tá vendo os blocos? Você consegue, mesmo que você não esteja minerando, você tá vendo os blocos, você consegue calcular. Ah, nesse bloco teve tanto de a maior taxa que pagou foi essa, a menor foi aquela, a distribuição foi assim. Você consegue calcular cada uma das taxas para cada uma das transações que tá nos últimos blocos. Igual mercado de coisa. Você olha o se olha o passado recente, vê quanto foi os os últimos negócios que fechou e tenta, tenta ir perto daquilo, certo? Tá, mas você tem uma outra informação aqui, tá? Como qualquer outro mercado, tá de carro que você tá colocando aqui, mas todo todo o mercado funciona assim também. Pode estima o preço de alguma coisa olhando o que os outros estão fazendo ao nosso redor.

Você pode olhar as transações que estão num no que a gente vai chamar de mpol. Que que é mpol, tá? Que é mempol. MPOL é um banco de dados que o seu que o seu nó vai construir com transações que são válidas. Ele recebeu uma transação, validou e ele decidiu. Isso aqui é válido, eu não vou rejeitar. Mas eu nunca vi essa transação num bloco. Quer dizer que eu não posso confiar nisso aqui ainda. Não posso confiar no sentido de pode ser que que seja confirmada uma outra transação concorrente a essa daqui que gasta a mesma coisa que essa. E aí essa daqui será invalidada por causa disso. Ela é válida hoje porque eu nunca vi ela ou nenhuma concorrente num bloco, tá? Mas eu não posso confiar totalmente nessa coisa aqui ainda, tá? preciso esperar a confirmação. Então, elas são válidas, mas não confirmadas.

Elas são válidas, mas elas não são confirmadas, tá? Daquelas sções que são válidas, mas não estão confirmadas, é a daqui que o minerador vai tirar a fila de que vai construir a fila de de transações que potencialmente ele vai incluir no bloco, tá? Então, eu tô vendo as transações que potencialmente vão entrar no próximo bloco ou nos próximos blocos. Tá? Então, eu tô vendo tanto o passado quanto eu tô vendo o presente. Eu não sei o futuro, eu não sei o que que vai ter no próximo bloco, mas eu tô vendo o passado e eu tô vendo o presente, tá? Como que a gente estima isso?

Por isso que eu falei, agora passa a ser um problema de estimação, já não é mais Bitcoin, si filtro de calma, cadê de marcov, sei lá o que que você vai usar para estimar, tá? Sei lá o que você vai usar para estimar, mas o técnicas de outros domínios para isso aí na engenharia não faltam, tá? É um problema de, inclusive é um problema de inteligência artificial, isso aqui entre aspas hoje em dia chama inteligência artificial também, tá? Fazer esse tipo de estimação, tudo bem? Essa mull aqui, tá? É uma coisa interessante. Ela é uma coisa interessante de comentar um pouco mais. Primeira coisa perceber, ao contrário da blockchain que a gente vai ter que a gente tem um mecanismo de sincronização, que é os blocos sendo minerados, é o mecânico de sincronização dessa blockchain. A Mainpol não tem um mecanismo de sincronização.

Isso quer dizer que a MPOL, as transações que eu vi, eu validei, não são as mesmas transações que você viu e eu e você validou, porque pode ser que eu tenha visto algumas transações que você nunca viu e vice-versa. E pelo menos agora na na em princípio na rede, a gente não tem nenhum mecanismo para sincronizar isso, tá? A única coisa que eu posso falar é: "Ah, eu vi algumas transações, se você é o no que tá conectado comigo, eu olho e falo assim, ó, eu vi essas transações aqui." Inclusive, você pode nunca pedir aqueles dados para ver também. Eu anuncio para você, falo: "Ó, eu vi essa transação aqui, mostro para você o identificador dela, mas você que tem que me pedir os dados. Pode ser que você nunca me peleza?" por qualquer motivo que seja, sei lá por quê, tá? Não importa, tá? Mas a mainol ela não é sincronizada. Isso quer dizer que cada mainpool, na verdade não tem a mainpol, cada nó vê uma, tem uma mpol diferente, uma visão local do que que tá acontecendo, tá? Outra coisa que influencia no que que cada o que que tá ali disponível em cada mainpol é quanto de memória,

quanto de memória eu permito o meu nome, isso vai rodar num computador em algum lugar, quanto de memória eu permito o meu computador gastar com essa estrutura. Vai construir um banco de dados, eu falo: "Ah, você pode gastar 100 M de 100 M com isso, 10 M, sei lá quanto". Obviamente, se eu no meu nó, eu falo assim, não, só pode gastar 10 M com de dados aqui. 10 M é suficiente para 10 blocos de transações, tá? Não é exatamente pouquinho. Ah, eu só deixo 10 M. E tem um outro lá que permite 1 GB nessa MPOL. Cara, com certeza essa MPOL de 1 GB vai ter transações que de 10 M não vai ter. Elas vão ser diferentes, tá? Vão ser diferentes. Repare que isso tem um custo, né? Tipo, tem um custo aqui de infraestrutura para manter para eu manter essa coisa, tá? Mas a MPOL não é sincronizada, não é sincronizada, tá? E aí do mesmo jeito que a gente fala em que a gente fala em quando a gente fala em na blockchain e nas transações, ah, pera aí, tá aqui, ó. Quando eu falo que alguma coisa é válida ou inválida, eu tô fazendo uma referência ao que a gente chama de consenso. Tem um conjunto de regras que eu vou comentar com vocês aqui que são regras, algumas são explícitas e outras não são explícitas. Essa coisa é bem mais complicada do que parece, tá? Mas é um conjunto de regras e esse conjunto de regras determina. Isso é válido, aquilo é inválido e as regras t a ver com as transações e com os blocos.

Ao contrário do do do das transações dos blocos, que tem uma regra hard de que a gente tá chamando de consenso, tá? A MPOL, ela vai seguir um outro conjunto de regras que a gente vai chamar de policy o polices ou as políticas, tá? Por um motivo muito pragmático, eu preciso decidir o que que eu faço com essas transações aqui. Imagina que tá chegando transações, eu tenho uma quantidade de memória limitada, vou precisar jogar algumas fora eventualmente, tá? Qual a regra que eu escolho para jogar essas transações fora, para descartar elas? É uma regra de política. É minha minha política interna. Eu posso no meu nome decidir assim: "Ah, se tá se acabar o espaço da MPU e tá chegando transações novas, joga fora as mais antigas". Por que que isso faria sentido? Quando você olha historicamente lá na na blockchain, você consegue olhar isso, né? na blockchain tal você percebe que UTXOs mais recentes tendem a ser gastas mais rápido eoss mais antigas elas tendem a ficar lá paradas paradas há muito tempo. Quanto maior maior idade de uma de uma utxo, quanto maior a idade de uma xo, menor a probabilidade dela se gasta, observando o que tá acontecendo historicamente na na blockchain, tá? Então, pô, faz sentido eu tentar manter só as transções mais recentes, porque provavelmente é aquelas que vão entrar no bloco ali, a que eu preciso para validar o próximo bloco para aquela coisa. Se acontece tipo a taxa, não sei porque que isso acontece, porque tipo tese, elas teriam uma taxa maior. Isso é uma boa pergunta. Por que que isso acontece? Eu não faço a menor ideia porque que isso acontece. Eu tenho uma uma tese que eu não tenho menor ideia de como é que eu poderia verificar isso. Já te passo a palavra. Eu eu tenho uma tese de que tem dois tipos de atores aqui no no hoje no Bitcoin, que é o o Hoder, Rodler, Rodler, que é meio que uma piadinha com o Holder, né, tipo, tá mantendo a parada e tem alguém que tá de fato usando isso em em aplicações, vou chamar assim de applications, tá? tá usando com pagamentos, aplicações, tá usando realmente para fazer pagamentos, tá? Esse cara tá estocando, esse cara tá usando a coisa para pagamento de fato, tudo bem? E aí repara que esse cara aqui é o buy hold, cara, ele compra e segura. Então faz sentido que tem algumas exels lá que foram criadas e tá lá parado. Essas aqui não é dinheiro que tá tipo circular no com a velocidade um pouco maior. O trader tá ali na aplicações o trader me que tá ali no aplicações. Diga, Luca. É porque eu acho que eu entendi errado, mas acho que o senhor tá confundindo a questão do do prasto das de fato tensa curva, né? que tem que asções mais antigas tendem a não ser gastos, mais novas tendas rapidamente. Isso. Só que se eu tava falando questão de memory da memory da main que no caso assim chegou transações e a memory main tá ficando lotado e eu escolho quais que eu vou descartar. Uhum. E aí no caso se eu relaciono a questão de descartar as que estão há mais tempo na minha Ela diz que isso é uma regra possível. Sim, mas eu acho que ela não tem relação direta entre a questão de das transações das super Souls mais antigas e as transações. É, eu é eu não tô afirmando que é por causa disso que a gente faria isso. Tô dizendo que tem alguma lógica de se fazer isso por conta desse fenômeno aqui.

Mas tem outras políticas, né? Alguém pode falar assim: "Não, eu vou manter as mais antigas e eu vou manter as mais antigas ou então eu posso escolher com base nas taxas que estão sendo pagas. Ah, eu vou ficar mantendo aquelas que pagam muita taxa mesmo, independente da idade. Mas repare que isso aí é uma regra, uma regra local. Cada nota decide o que fazer e fazer diferente. Não importa que a gente não sai de consenso por causa disso. E antigamente tinha

tipo assim, a inclusão de transações no bloco sempre foi de acordo com taxa ou identificar escolho, mas ou você tinha uma regra quando existir mineração no Bitcoin de que tipo transações mais antigas teria algum peso algum fator de peso para serem incluídas no bloco. Hum. Nunca vi. Eu não lembro, eu não vi a implementação lá das antigas, mas me lembro que de ter visto no código lá do tipo, sei lá, de 2009, 2010, quando ainda tinha mineração lá do Bitcoin Core, quando era CPU, de ter visto um trecho de código que era a parte onde era o template, né, que ele ordenava com base nas taxas. Eu não sei dizer se tinha outras regras para ir construindo essa fila. Não me lembro disso. Eu acho que não tinha, porque eu provavelmente seria bem marcante, né?

Mas foi uma época eu não olhei com detalhe isso, não me interessava muito saber. Eu tava tentando descobrir que o código fazia, sabe? Todo mundo bem. Então se uma uma ordem de pagamento saiu da emo de todo mundo, ela morreu.

Repete sua pergunta. Sua pergunta acho que é mais interessante do que parece. Você falou que tem a empurro é só a questão das suas ordens de pagamento, ordem de Isso as transações. Transações. Você tem uma transação que ela ficou tão antiga que elas ou que ela ficou sei lá inadeada que ela saiu de todas as mentas. Que que acontece com ela? Tá. Essa pergunta é bem interessante. Imagina que tem uma transação que o nó cinza propagou pros outros nós. E aí por por algum motivo de, sei lá, vamos supor que a taxa era muito baixa e ela acabou nunca sendo confirmada, foi acumulou lá e os outros nós foram foram deletando essa transação aí com o tempo das suas main pools porque tava ficando muito antiga. E aí eles suporam nesse nessa política de manter as mais recentes e deletar as mais antigas em prol das mais recentes, tá? Quer dizer que minha transação morreu, cancelou, sumiu? Isso é uma boa pergunta, porque olha só, você que fez o pagamento, você não vai deletar isso aqui da sua carteira e principalmente quem tá recebendo aqueles dinheiros não vai deletar isso da sua carteira ou da sua mpol, porque quem tá recebendo aqueles dinheiros ali, quem tá envolvido com as transações, com a com a transação, quem tá envolvido diretamente com aquela transação, tem interesse que aquela transa seja confirmada. Então ele tem interesse em monitorar aquilo e manter aquele dado lá, inclusive às vezes repropagando ela se ela tá ficando muito antiga, né?

Teria uma regra questão da propagação, senão não tem uma regra muito específ, tem regra sobre a propagação, porque a propagação é parte dessas políticas aqui. Poderia sair pro spamando? poderia sair spamando, mas aí entra uma outra questão de rede que é a gente vai, se a gente se um a gente vai começar a botar regras no lado da do P2P, né, do networking, se você começar a ficar me mandando tipo, sei lá, fluing, né, tipo a mesma transação, o tempo, é porque não é bem assim que funciona. Não é como se não é não é não. Esse nó aqui ele não pega a o dado da transação e manda para você. Não é assim que funciona, tá? O que de fato a gente faz é, eu mando para você um TX ID da transação, que é o identificador dela. Eu eu aí tem uma mensagem bem específica, chama INV, que é uma mensagem de inventário. Você aprende falar aí, eu tenho isso, eu tenho aquilo, tá? É, é a mensagem mais comum na rede. Eu mando para um nó aqui um TX ID nesse, tipo, tem um pouco mais de coisa lá, porque como o TX ID e o identificador do dos blocos não tem diferença, são rest do mesmo tamanho, eu preciso dizer: "Ah, isso aqui é uma transação, isso é um bloco". Tá, mas enfim, eu mando o TXD. Se esse esse nó aqui diante dessa informação, ele olha e fala assim: "Ah, eu não tenho eu não tenho essa transação aí". Aí o que que ele faz? Ele manda uma outra mensagem aqui que é o get data com aquele TX ID. Ele fala assim: "Me dá essa, me dá essa, me dá essa transação, então. Me dá os dados dessa, dessa coisa com esse identificador aqui." Então, aí o azul vai lá e manda a transação. Aí chegou a transação, vai validar e vai botar na MP, entendeu? Então não é exatamente eu te mando transação, eu fico anunciando, eu tenho isso, eu tenho isso, eu tenho isso. E não tem problema essa mensagem de inventário, ela curtinha, ela é feita para ser propagada assim um monte de vezes, repetida até se for o caso.

Dá para fazer doos com isso? Dá, tem problemas aí. Claro que tem algumas proteções, mas sim, tem problema aqui. Mas boa parte da boa parte das mensais acontece isso, tipo, mano, mano, anunciou transação repetida, acontece. Isso aí não é um grande problema, porque o dado é pouco. O TX são 32 bytes, é bem pequenininho. A mensagem de Inv tem um cabeçalho que é bem pequenininho também, sabe? É coisa de uns, é total aí deve dar coisa de uns 50 bytes. Então você tem como excluir uma transação de forma passiva da rouel confirmado. É só você não fazer. É, mas aí os envolvidos também t excluir aquela transação. Às vezes o envolvido pode ser mesmo, uma parte sua pode ser isso. Mas isso aí entra numa questão que é o management dessas transações. Sua carteira precisa gerenciar elas, tanto as que você tá pagando quanto as que você tá recebendo. Mas se fizer uma para mim mesmo propagando a rede, a rede esquecer e sei lá. Mas você mantém aquela transação com você. Imagina que você propagou uma transação que paga você mesmo. Aí a rede esqueceu ela porque tava pagando muito pouca taxa. Mas você tá com ela ali ainda. Computador molhou. Hã? Aí o meu computador molhou. Per. Pode. É. É. Mas aí a gente já tá indo para um cenário muito muito doido assim. Não tem como saber. Em princípio, como é que você cancela? Em princípio você não cancela uma transação ou ela e ela não é esquisa pela rede? Em princípio, tá? Você tá vendo que é mais complicado do que parece. Tudo bem? Mas vamos lá. Em princípio, como é que você cancela uma transação? Você escreve, não é por cima, você escreve outra que faz o gasto duplo com relação à aquela primeira. A gente vai ver aqui que tem outros mecanismos para isso. Aí no caso assim, ele falou a a hipótese dele seria dele para ele mesmo, né? Mas no caso do o recebedor ser uma pessoa, esse recebedor ele pode criar uma transação com essa nova moeda que ainda não foi confirmada. eh sendo vinculada e a segunda transação tem uma taxa para poder forçar a primeira a ser realizada. Não entendi. O senhor tinha dito aí que talvez seja o mecanismo que eu vou mostrar agora, tá? Tá. Tá bom. Mas enfim,

entenderam que essa história da MPU é mais complexa do que parece, né? Tá, tem uma certa discussão hoje e tem proposta pra gente começar a ter algum mecanismo de sincronização dessas mulso, tá? E e por um motivo muito simples, porque isso melhora o o a propagação dos blocos, porque se eu quando eu te mando um bloco, a a expectativa é de que a maior parte das transações que vai estar naquele bloco, você já viu, tá validado na tua mpol. Então não preciso te mandar aquele 1 MB inteiro, posso te mandar o cabeçalho que que você nunca viu, a Coinbase transaction, mas as transações que eu acho que você não tem, mas eu não preciso te mandar tudo. Se eu achar que você tem a maior parte delas, não preciso te mandar de novo. Esse mecanismo tá implementado hoje que chama compact block. Mas compactar o bloco seletando não é compactar o bloco. É eu te mando, eu não te mando as transações dele. Mas tipo, se é tão pequeno, investir por se é tão pequeno porque 1 MB parece muito pequeno, certo? 1 MB parece muito pequeno, mas 80 by, 100 byt, 200 bytes é bem menor, né? Bem ainda menor. Concorda? Tá. Qual que é o lance aqui? A velocidade de propagação dos blocos, quanto maior a velocidade de propagação dos blocos, menor a possibilidade de acontecer um um forque na rede, de eu tá minerando e não ter visto o último bloco. Quanto mais rápido os blocos se se propagam, mais rápido todos os mineradores vem o bloco novo, todos os mineradores começam a trabalhar em cima do bloco novo e aí isso diminui a probabilidade do split na rede, entendeu? Então isso melhora a mecânica da da rede como um todo, diminui essa o a reorganização que é tipo esses blockchains concorrentes, é normal, é natural, mas a gente não quer que elas aconteçam. Então esse mecânico de compact block, por mais bobo que pareça, é é isso aqui é de 1 M para 200 byt, faz toda a diferença. É a diferença de um bloco demorar, sei lá, 2, 3 segundos para propagar na rede toda. 2, 3, 4, 10 segundos, sabe? Assim, para cobrir a rede toda e demorar 10 msundos. Essa é a escala que a gente tá tentando, é dessa escala que a gente tá falando. E esses segundos fazem muita diferença nesse nessa probabilidade de forx na rede. É bem raro ver um forque na rede hoje, tá? De um bloco ou dois blocos. É muito raro. No início da rede era extremamente comum forque de dois, três, quatro blocos. Tinha toda semana tinha forque de de de dois blocos. forte, por exemplo, eh, vamos supor que que eu sou um indador e eu recebo dois bos simultaneamente válidos do céum eh foram blocos honestos, só que por acaso dois mineradores blocos concorrentes, eles blocos diferentes, são diferentes. Eu como minerador como eu escolho qual dessa seguir, porque todo mundo vai tomar uma Você que vai dizer a decisão sua. Então isso isso por 50 50 para você tanto faz. Concorda? 50% dos se o bloco, se um dos blocos que concorrentes que apareceram ele ele paga a subsídio para você é aquele que você vai escolher, óbvio, né? Mas se você é um terceiro ali, você viu dois blocos concorrentes, você tá um minerador e viu outros dois blocos lá quaisquer. Tu escolhe o primeiro, tu escolhe o que você quiser. Mais ou menos metade da rede, escolhe o errado. Mais ou menos metade da rede. Eu não sei, diz, eu não diria, mas pode acontecer um split e aí o minerador vai começar, cada um escolhe, fala: "Não, beleza, eu vi esse aqui, eu vou seguir nesse aqui. Não, eu vi aquele, eu vou seguir naquele". Não tem uma regra que não importa. Qualquer bloco sendo válido é é OK. Ao contrário de quando acontece problemas se 50% por exemplo escolher o primeiro bloco 50% do mundo, alguma hora um vai achar o próximo blo isso essa computação de todo esse pedaço de rede ferrado foi jogada fora. Foi foi jogada fora. Paciência da vida. É parte do protocolo, não é? Eu não, eu não diria que foi jogada fora, eu diria que isso foi parte do processo. Isso, isso tem que acontecer para blockchain continuar eh progredindo. Isso é parte do processo. Cuidado com essa noção de tem que jogar fora. Não, não tem não tem trabalho jogado fora aqui. Você é parte do processo. Esse trabalho precisa acontecer de precisa acontecer. Pronto, foi o custo daquele outro bloco lá e teve um reorg no meio, teu, teve todo esse custo aí e acabou. É, mas se eles concordassem mais capacidade da rede estaria dedicada para essas novas. Isso em parte, por isso que a gente quer esses blocos propagando mais rápido. Isso diminui essa probabilidade. Você pode pensar que é um certo desperdício ali quando tem um bloque reorganizado. De fato, de alguma forma é mesmo. Mas como é que a gente melhora isso? Diminuindo, aumentando a velocidade de propagação desses blocos, diminuindo a latência.

A gente não tá falando muitos. E aqui praticamente eu não vou falar quase nada, só muita amplaçã de como é que é a camada de rede dessa coisa, tá? Mas a camada de rede é importantíssima, é importantíssimo. Mas basicamente aqui nessa disciplina a camada de rede para mim é a tem algum mecanismo de trocar mensagem, a mensagem chega lá, tá? Mas é extremamente relevante. Inclusive incentivo que vocês façam trabalhos na relativo essa camada de rede, porque tem muita coisa interessante acontecendo, tá? Ah,

deixa eu falar mais 10 minutos e aí eu libero para vocês pro intervalo já para almoçar. Que que eu faço se eu escolher uma taxa muito baixa? Que que eu que eu faço se eu quiser mudar a taxa da minha transação? Tá? Hã? Então, a em princípio, que que eu precisaria, que que tá acontecendo, né? Eu tenho uma transação que tem uma entrada, sei lá, tem duas saídas, imagino que tá pagando muito pouca taxa. Que que eu posso fazer para eh que que eu posso fazer para um pagar mais taxa? Tá? Eu poderia pensar o seguinte: "Opa, eu vou fazer uma transação, uma outra que gasta a mesma entrada e e faz entre aspas os mesmos pagamentos, só que agora fazendo mais taxa, pagando mais taxa, tá? E em princípio a vermelha, quando ela for confirmada invalida a transação preta, tá? Qual é o problema? O problema é que havia uma regra no no uma regra de política. Repara, ó, política que era widpread, né? que era a regra standard padrão. Basicamente todo mundo seguia que era o seguinte: se eu ver uma transação válida fazendo gasto duplo, eu vou jogar ela fora. Eu não olhava a taxa, entendeu? Eu não mantenho essa cara aqui. Eu valido ela, mas eu não repropago esse cara pros meus outros, porque eu já vi uma outra que que tá que tá gastando a a a primeira a uma certa XO, uma certa moeda, tá? Isso aqui é uma tentativa de gasto duplo. Isso aqui é uma coisa para um nó olhar e falar: "Cara, isso aqui é uma coisa, isso aqui é para ser estranho, isso aqui é para levantar alertas, tá? Como é que era a política normal?" Tá, eu vi isso, eu validei, mas a tentando fazer um gasto duplo, eu vou jogar fora essa segunda. Isso aqui diminui muito a probabilidade de que essa transação vermelha seja confirmada no lugar da preta e a só que a preta tá pagando pouca taxa e aí não tá também não tá confirmando a preta, tá? que que a gente fez em algum momento teve uma proposta e aí o mecanismo hoje que que um dos mecanismos que é mais que é bastante usado é o replace by fee. Replace by fe rbf, tá? E ele foi sendo introduzido em em em várias etapas. Antes ele era optativo, hoje ele é meio que meio que é o é o padrão, tá? Enfim, qual que é a ideia? Qual que é a ideia? A ideia é que eu vou colocar alguma coisa na transação, na primeira, tá? Na transação, na primeira transação, sinalizando se ela pode ser sobrescrita, entre aspas, ou não, se ela pode ser substituída ou não, tá? Especificamente no Bitcoin, como é que isso é feito? Na entrada das de cada transação tem quatro campos. Cada entrada tem quatro campos. Tem o TX ID de e o index. Isso aqui diz para mim qual moeda eu tô tentando gastar. Eu tenho o script script SIG, que tem os dados necessários para para cumprir o contrato da moeda que eu tô tentando gastar. E tem um campo que chama sequence, que quando eu tava falando dação, eu só falei assim: "Esquece isso aí", tá? Ele era usado para fazer uns lock time, mas isso nunca deu deu certo. E aí ele era um campo que não servia para nada. Basicamente todo mundo, o que que todo mundo fazia? Escreve F, F blá blá blá, tudo F aqui e segue a vida. Ele meio que não servia para nada, tá? Na prática não servia para nada. Que que a gente fez? Então teve um soft fork em algum momento, vou falar que que é soft fork na segunda metade da aula, que mudou a interpretação do que do que que é o sequence, tá? Que mudou a interpretação do sequence. Se o sequence for diferente de tudo f, quer dizer que essa transação aqui ela pode ser replaced. Eu posso fazer isso aqui

de e desde que eu siga algumas regras, essa transação vermelha vai sobrescrever na main poodles de quem tá recebendo aquilo aquela transação preta. E aí isso propaga a transação vermelha com mais facilidade, tá? Só que isso tem problemas, vocês podem imaginar, porque é muito toda vez que a gente introduz um mecanismo assim que é desejável, tá? Eu quero poder fazer isso, me dá vantagens. Qual o problema? Eu aumento minha superfície de ataque de algum tipo de de negação de serviço, fazer um fluid em alguma coisa, porque antes eu isso aqui, ó, servia como mecanismo de contenção de quantos mensagens vão ser propagados na rede, tá? Agora diminuir esse mecanismo de contenção. Agora eu posso ficar pegando. É muito barato criar transação e é muito barato que a transação fazer um gasto duplo, tá? Por isso que não é só ir lá e falar assim: "Ah, o sequência é tanto". Tem algumas regras, tá? Uma das regras, uma das regras é a chamada regra três, que sempre me lembra da música do Toquinho. Como é que é o nome del? Regra três mesmo, tá? Hã, é, você abusou da regra três, onde menos vale mais. Você já viram isso, tá? Quem não conhece essa música precisa ter referências, velho, porque se aplica muito, a letra da música se aplica muito essa a fatídica a regra três aqui, tá? Mas enfim, que que a regra três fala, tá? A regra três do RBF, que que ela fala? Ela fala que a transação que tá substituindo, ela não tem, ela tem que pagar mais taxa,

ela tem que pagar mais taxa absoluta

e não só a uma taxa por byte maior, tá? Que que eu quero dizer com isso? Deixa eu dar um exemplo aqui. Imagina que eu tenho uma transação, uma transação A que tem 100.000 bytes e ela tá pagando um satche por byte. Um satche por byte. Isso aqui é a taxa da taxa, né? Tá? É o ratio, né? Em português sou a mal, né? Que a taxa da taxa. A gente usa a mesma palavra para duas coisas diferentes, mas tudo bem. Quanto de taxa total isso tá pagando? 100.000 sates. Isso é a taxa total que tá lá sendo paga, tá? Essa taxa é relativamente baixa, tá? É um sat por baixo. É barato, é bem barato. Na real uma transação a linha pode ser uma transação de 200 bytes e tá pagando dois satores por byte. Do ponto de vista do minerador, o que importa é isso aqui, ó, porque isso aqui é o custo benefício dele incluir isso no bloco, tá? Alguém tá me pagando mais pelo espaço que eu tô disponibilizando. Alguém tá me pagando mais pelo espaço, tá? Só que acontece que aqui gasta menos espaço do que aqui. Então a taxa total aqui fica maior do que aqui. Aqui tá pagando 200 atoches no total. Mas vocês vem que é como se fosse o aluguel por metro quadrado maior aqui, né? Tá? Enquanto que na de cima tá pagando um aluguel mais barato pelo metro quadrado. 400 400. Eu que eu não sei fazer conta. Beleza. A regra três fala que isso aqui não é permitido, que se isso acontecer não vai entrar lá no no replace. A transação a linha teria que pagar mais do que essa daqui, ó. tanto mais taxa relativa quanto mais taxa absoluta. Então, pra transação a linha entrar no RBF na pela regra três, ela tem que pagar mais do que 100.000 do que 100.000. Ela poderia pagar 100.000 sates. Só que quanto que dá isso de taxa de taxa relativa? Dá 101.000 dividido por 200 bytes. Sei lá, dá um número bem grande. 500 e tantos bytes, né? 500.000, sei lá. Nem sei quanto que dá isso. Dá muito, tá? Dá muito, dá uma taxa muito cara, estupidamente cara, sei lá, 500 por byte é muito caro, muito caro em qualquer situação, tá? Aqui pro pro historicamente pra rede é muito caro mesmo. Assim, tranquilo? Repare que essa regra três aqui, ó, ela pode ser facilmente abusada, porque eu posso facilmente criar uma transação aqui em algum momento, que é uma transação grande. É fácil criar uma transação grande, é só botar muitas saídas ou muitas entradas ou botar muitos dados lá no script, tá? Pagar uma taxa muito baixa, por exemplo, para pagar para você. Eu tô te fazendo pagamento. Aí eu crio uma transação bem grandona, pagando uma taxa bem pequenininha, tá? É relativamente fácil a gente fazer isso aqui, por exemplo, sei lá, eu sou uma corretora, tá? Aí eu tô tô te pagando o que você o que eu devo para você, só que eu tô te pagando uma transação que não confirma porque a taxa tá muito baixa. E aí, olha o problema. Para eu fazer o replace dessa coisa aqui, eu vou precisar aumentar muito a taxa de forma que isso aqui fica economicamente, pode ficar economicamente inviável de fazer. Então isso é um tipo de ataque que pode que é plausível, isso acontece na rede, tá? Isso aqui gera um problema que a gente chama de transaction pinning. Pinning. Pinning é botar um pino, né? Tipo tu, travar aí alguma coisa, lá botar um pino lá para travar, tá? Isso, isso aqui é uma forma de você travar uma certa transação lá e não deixar ela ser replaced, botar uma taxa muito alta, tá? botar uma transação muito grande com a taxa baixa, tá? Repare que isso é um problema. Se a gente tira, vai lá e tira a regra três, o que que a gente abre? Abre margem a ficar fazendo do agora é fácil de ficar fazendo replace e ficar fludando a rede com um monte de transação que vai ser tudo inválido, tá? Então, na hora que a gente tá fazendo essas regras, precisa tentar encontrar um balanço entre o ataque, lembra? é um ambiente adversarial, um possível atal de alguém tentando bagunçar a rede e alguma coisa que a gente tá tentando fazer que há um comportamento legítimo. Tudo bem? Vamos fazer um intervalo agora.